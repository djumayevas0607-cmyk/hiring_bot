# Hiring Questionnaire Bot (Aiogram v3)

## Установка
```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -U aiogram>=3.4,<4
```
(или укажите точную версию aiogram в requirements.txt)

## Запуск
1. Отредактируйте `config.py` (токен, MAIN_ADMIN, JOB_TYPES по желанию).
2. Запустите: `python bot.py`

## Функции
- `/start` — Приветствие: отправляет интро-видео (если задано) и сообщение с кнопками выбора типа работы. После выбора это сообщение удаляется.
- Анкета — последовательность вопросов ровно в том порядке, как вы описали, включая:
  - имя/фамилия
  - номер телефона (кнопка автопередачи контакта)
  - адрес (прописка)
  - дата рождения (валидатор формата 01.01.2000)
  - образование (кнопки: o'rta / o'rta maxsus / oliy)
  - опыт работы (свободный текст)
  - семейное положение (кнопки: turmush qurganman / turmush qurmaganman / ajrashganman)
  - отправка голосового промта от бота → пользователь должен ответить **голосом** (иначе бот молчит)
  - оценка уровня русского (кнопки) → бот отправляет **видео-промт**, пользователь должен ответить **видео** (или video-note). Если не видео — бот молчит.
  - согласие на проверку с прошлого места (кнопки ha/yo'q)
  - реферальные данные
  - срок работы у нас
  - готовность задерживаться
  - здоровье
  - почему опаздывают
  - почему воруют
  - почему одни работают хорошо/плохо
  - прошлый оклад
  - желаемый оклад
  - курсы
- По завершении бот отправляет сводку **в личку всем админам** и пишет кандидату: _"Ma'lumotlaringiz qabul qilindi. Tez orada xabarini beramiz!"_

## Медиа-промты (меняются через чат админом)
Ответьте **реплаем** (reply) на нужный медиа-месседж и отправьте команду:
- `/set_intro_video` — сохранить intro-видео, показывается при /start
- `/set_voice_prompt` — сохранить голосовой вопрос
- `/set_russian_video` — сохранить видео-вопрос про русский язык

Все file_id сохраняются в `storage/media.json`.

## Управление администраторами
- Главный админ (MAIN_ADMIN) может:
  - `/add_admin 123456789`
  - `/remove_admin 123456789`
Фактический список хранится в `storage/admins.json`.

## Примечания
- Если кандидат не отправил **голос** на голосовой вопрос — бот молчит (ровно по вашему требованию).
- Если кандидат не отправил **видео** на видео-вопрос — бот тоже молчит.
- Сообщение с кнопками выбора работы удаляется после выбора (интро-видео остаётся).
- Для ручного ввода телефона также принимается текст.
- Можно прервать анкету: `/cancel`.
